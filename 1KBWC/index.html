<html>
	<head>
		<!--
		Copyright Cynthia Clementine
		October-16-2021
		cards were largely not made by me, I am simply documenting them.
		-->
		<title>1K blank white cards - web access</title>
		<meta charset="UTF-8">
		<style>
			.labelImage {
				display: none;
				max-height: 150;
			}

			body {
				background-color: slateblue;
			}

			#topBar {
				text-align: center;
				margin: auto;
			}

			#centerModule {
				text-align: center;
				margin: auto;

				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 10px;
				grid-auto-rows: minmax(imageHeightLimit, auto);
			}

			#oregano {
				text-align: center;
			}
		</style>
		<script src="data.js"></script>
		<script type="text/javascript">
			window.onload = setupFromArray;

			var imageHeightLimit = 150;
			var imageClassName = "labelImage";


			function setupFromArray() {
				var bufferLocation = document.getElementById("centerModule");

				formatArray();

				//turn all elements in the card array into clickable links
				var linkElem;
				var imagElem;
				for (var c=0; c<cardData.length; c++) {
					try {
						//image to go inside the link with title
						imagElem = document.createElement("img");
						imagElem.src = cardData[c].url;
						//imagElem.style = `max-height: ${imageHeightLimit}px;`;
						imagElem.classList.add(imageClassName);

						//create link element and then put it in the main center column
						linkElem = document.createElement("a");
						linkElem.innerHTML = cardData[c].name;
						linkElem.href = cardData[c].url;
						linkElem.appendChild(document.createElement("br"));
						linkElem.appendChild(imagElem);
						

						bufferLocation.appendChild(linkElem);
					} catch (error) {
						console.error(`Problem making card link with data ~~${cardData[c]}~~`, error);
					}
					
				}

				//update title number
				document.getElementById("cardNumDisplay").innerHTML = cardData.length;
			}

			function formatArray() {
				var hiddenOnes = [];
				//first link each data entry with its correct image
				for (var c=0; c<cardData.length; c++) {
					if (cardData[c].hide != true) {
						cardData[c].url = `all-card-images/card~${c}.${cardData[c].imgType || "png"}`;
					} else {
						hiddenOnes.push(c);
					}
				}

				//actually remove hiddens, do it backwards so that removing doesn't affect the index numbers
				var num;
				while (hiddenOnes.length > 0) {
					num = hiddenOnes.pop();
					cardData.splice(num, 1);
				}


				//next sort the array CORRECTLY
				// cardData.sort((a, b) => {
				// 	return a.name.toLowerCase().localeCompare(b.name.toLowerCase());
				// });
			}

			function toggleImages() {
				var currentVal = [...document.styleSheets[0].cssRules].find(x=> x.selectorText==`.${imageClassName}`).style.display;

				//pretty simple toggle
				if (currentVal == "none") {
					[...document.styleSheets[0].cssRules].find(x=> x.selectorText==`.${imageClassName}`).style.display = "inline";
				} else {
					[...document.styleSheets[0].cssRules].find(x=> x.selectorText==`.${imageClassName}`).style.display = "none";
				}
			}
		</script>
		
		
	</head>
	<body>
		<div id="topBar">
			<h1>There are <span id="cardNumDisplay">[[NUMBER UNAVAILABLE]]</span> cards</h1>
			<button onclick="toggleImages()">Toggle Image Previews</button>
			<br>
			<br>
		</div>
		<div id="centerModule">
		</div>
		<p id="oregano">
		</p>
	</body>
</html>